<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CAREER RECOMMENDATION SYSTEM</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5fffa 0%, #c3cfe2 100%);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
    }

    .header {
      margin-bottom: 40px;
      animation: fadeIn 1.5s ease-in-out;
    }

    h1 {
      font-size: 2.5rem;
      color: #2c3e50;
      margin-bottom: 10px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }

    .subtitle {
      font-size: 1.2rem;
      color: #7f8c8d;
      margin-bottom: 30px;
    }

    .upload-box {
      background: white;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      transition: transform 0.3s ease;
    }

    .upload-box:hover {
      transform: translateY(-5px);
    }

    .upload-btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s ease;
    }

    .upload-btn:hover {
      background: #2980b9;
    }

    #file-name {
      margin-top: 15px;
      font-size: 0.9rem;
      color: #7f8c8d;
    }

    .results {
      display: none;
      text-align: left;
      background: white;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-top: 20px;
    }

    .section {
      margin-bottom: 25px;
    }

    .section-title {
      font-size: 1.3rem;
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 5px;
      margin-bottom: 15px;
    }

    .skill-tag {
      display: inline-block;
      background: #e0f7fa;
      color: #00838f;
      padding: 5px 10px;
      border-radius: 20px;
      margin: 5px;
      font-size: 0.9rem;
    }

    .mistake {
      color: #e74c3c;
      margin: 10px 0;
      padding-left: 20px;
      position: relative;
    }

    .mistake:before {
      content: "⚠️";
      position: absolute;
      left: 0;
    }

    .recommendation {
      background: #e8f5e9;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
    }

    .confidence {
      font-size: 0.9rem;
      color: #43a047;
    }

    .goodluck {
      font-size: 1.5rem;
      color: #3498db;
      margin-top: 30px;
      animation: fadeIn 2s ease-in-out;
    }

    .resume-rating {
      margin: 20px 0;
      padding: 15px;
      background: #fff8e1;
      border-radius: 5px;
    }

    .rating-stars {
      color: #ffc107;
      font-size: 1.5rem;
      margin: 10px 0;
    }

    .job-list {
      list-style-type: none;
      padding: 0;
    }

    .job-item {
      background: #e3f2fd;
      padding: 10px 15px;
      margin: 5px 0;
      border-radius: 5px;
      transition: transform 0.2s;
    }

    .job-item:hover {
      transform: translateX(5px);
      background: #bbdefb;
    }

    .loader {
      display: none;
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>CAREER RECOMMENDATION SYSTEM</h1>
      <p class="subtitle">Upload your resume for personalized career recommendations and analysis</p>
    </div>

    <div class="upload-box">
      <input type="file" id="resume-upload" accept=".pdf,.docx,.txt" style="display: none;">
      <button class="upload-btn" onclick="document.getElementById('resume-upload').click()">Upload Resume</button>
      <div id="file-name">No file selected</div>
    </div>

    <div class="loader" id="loader"></div>

    <div class="results" id="results">
      <div class="section">
        <h2 class="section-title">Resume Analysis</h2>
        <div id="analysis-results"></div>
      </div>

      <div class="section">
        <h2 class="section-title">Career Recommendations</h2>
        <div id="recommendation-results"></div>
      </div>

      <div class="section">
        <h2 class="section-title">Job Titles Matching Your Profile</h2>
        <div id="job-recommendations"></div>
      </div>

      <div class="section">
        <h2 class="section-title">Resume Rating</h2>
        <div id="resume-rating"></div>
      </div>

      <div class="goodluck">GOOD LUCK WITH YOUR CAREER JOURNEY!</div>
    </div>
  </div>

  <script>
    document.getElementById('resume-upload').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        document.getElementById('file-name').textContent = `Selected: ${file.name}`;
        document.getElementById('loader').style.display = 'block';
        document.getElementById('results').style.display = 'none';

        const formData = new FormData();
        formData.append('resume', file);

        fetch('/upload', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          document.getElementById('loader').style.display = 'none';
          if (data.error) {
            alert(data.error);
            return;
          }

          const analysisDiv = document.getElementById('analysis-results');
          analysisDiv.innerHTML = '';

          if (data.analysis.skills && Object.keys(data.analysis.skills).length > 0) {
            let skillsHTML = '';
            for (const [category, skills] of Object.entries(data.analysis.skills)) {
              skillsHTML += `<h4>${category}</h4><div>${skills.map(skill =>
                `<span class="skill-tag">${skill}</span>`).join('')}</div>`;
            }
            analysisDiv.innerHTML += `<h3>Skills Found:</h3>${skillsHTML}`;
          }

          if (data.analysis.mistakes && data.analysis.mistakes.length > 0) {
            const mistakesHTML = data.analysis.mistakes.map(m => `<div class="mistake">${m}</div>`).join('');
            analysisDiv.innerHTML += `<h3>Suggestions for Improvement:</h3>${mistakesHTML}`;
          }

          const recDiv = document.getElementById('recommendation-results');
          recDiv.innerHTML = '';
          if (data.recommendations && data.recommendations.recommendations) {
            data.recommendations.recommendations.forEach((rec, index) => {
              const confidence = (data.recommendations.scores[index] * 100).toFixed(1);
              recDiv.innerHTML += `<div class="recommendation"><strong>${rec}</strong><div class="confidence">Confidence: ${confidence}%</div></div>`;
            });
          }

          const jobDiv = document.getElementById('job-recommendations');
          jobDiv.innerHTML = '';
          if (data.jobs && data.jobs.length > 0) {
            jobDiv.innerHTML = data.jobs.map(job => `<div class="job-item">${job}</div>`).join('');
          }

          const ratingDiv = document.getElementById('resume-rating');
          if (data.analysis.rating !== undefined) {
            const stars = '★'.repeat(data.analysis.rating) + '☆'.repeat(5 - data.analysis.rating);
            ratingDiv.innerHTML = `<div class="resume-rating"><h3>Your Resume Score: ${data.analysis.rating}/5</h3><div class="rating-stars">${stars}</div><p>${getRatingFeedback(data.analysis.rating)}</p></div>`;
          }

          document.getElementById('results').style.display = 'block';
        })
        .catch(error => {
          document.getElementById('loader').style.display = 'none';
          alert('An error occurred: ' + error.message);
        });
      }
    });

    function getRatingFeedback(rating) {
      const feedback = [
        "Your resume needs significant improvement.",
        "Your resume is below average and needs work.",
        "Your resume is average. Consider adding more details.",
        "Your resume is good but could be improved.",
        "Your resume is excellent!",
        "Your resume is outstanding!"
      ];
      return feedback[Math.min(rating, 5)];
    }
  </script>
</body>
</html>
